{"version":3,"sources":["../src/server.jsx"],"names":[],"mappings":";;;;;QAIgB,iBAAiB,GAAjB,iBAAiB;kBAoCT,MAAM;;;;;;;;;;;;;;AApCvB,SAAS,iBAAiB,OAA+B;QAA5B,GAAG,QAAH,GAAG;QAAE,OAAO,QAAP,OAAO;QAAE,IAAI,QAAJ,IAAI;QAAE,IAAI,QAAJ,IAAI;;AACxD,OAAG,GAAG,GAAG,iBAAc,CAAC;AACxB,WAAO,YALF,cAAc,EAKG;AAAC,WAAG;UAAC,OAAO,EAAE,OAAO,AAAC;QAAC,8BAAC,IAAI,EAAK,IAAI,CAAI;KAAM,CAAC,CAAC;CAC1E;;AAED,SAAS,MAAM,CAAC,MAAM,EAAE,IAAI,EAAE;AAC1B,WAAO,8BAAC,MAAM,EAAK,IAAI,CAAI,CAAC;CAC/B;;AAED,SAAS,GAAG,QAAkD;QAA/C,OAAO,SAAP,OAAO;QAAE,IAAI,SAAJ,IAAI;QAAE,IAAI,SAAJ,IAAI;QAAE,WAAW,SAAX,WAAW;QAAE,IAAI,SAAJ,IAAI;QAAE,GAAG,SAAH,GAAG;;AACtD,UAAM,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;AACtB,UAAM,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC;AAC3B,YAAI;KACP,EAAE,IAAI,CAAC,CAAC;;AAET,UAAM,GAAG,GAAG;AACR,cAAM,EAAE,KAAK,IAAI,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC;AAC/B,gBAAQ,EAAE,KAAK,IAAI,QAAQ,CAAC,KAAK,GAAG,KAAK;AACzC,eAAO,EAAE,CAAC,GAAG,EAAE,KAAK,KAAK,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK;AAC9C,eAAO;KACV,CAAC;;AAEF,UAAM,CAAC,MAAM,CAAC,QAAQ,EAAE;AACpB,YAAI,EAAE,iBAAiB,CAAC;AACpB,mBAAO,EAAE,GAAG;AACZ,eAAG;AACH,gBAAI;AACJ,gBAAI;SACP,CAAC;AACF,mBAAW,EAAE,CAAC,WAAW,GAAG,IAAI,GAAI,OAAO,WAAW,KAAK,UAAU,GAAG,WAAW,EAAE,GAAG,WAAW,AAAC;AACpG,WAAG,EAAE,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;KAChC,CAAC,CAAC;;AAEH,WAAO,MAAM,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC;CACrD;;AAEc,SAAS,MAAM,CAAC,OAAO,EAAE;AACpC,WAAO,mBAAmB,GAAG,YAxCR,oBAAoB,EAwCS,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;CACnE","file":"server.js","sourcesContent":["import React from 'react';\nimport { renderToString, renderToStaticMarkup } from 'react-dom/server';\nimport DefaultApp from './App';\n\nexport function renderToStringApp({ App, context, View, data }) {\n    App = App || DefaultApp;\n    return renderToString(<App context={context}><View {...data} /></App>);\n}\n\nfunction layout(Layout, data) {\n    return <Layout {...data} />;\n}\n\nfunction app({ context, View, data, initialData, Html, App }) {\n    const css = new Set();\n    const htmlData = Object.assign({\n        View,\n    }, data);\n\n    const ctx = {\n        addCss: value => css.add(value),\n        setTitle: value => htmlData.title = value,\n        setMeta: (key, value) => htmlData[key] = value,\n        context,\n    };\n\n    Object.assign(htmlData, {\n        body: renderToStringApp({\n            context: ctx,\n            App,\n            View,\n            data,\n        }),\n        initialData: !initialData ? data : (typeof initialData === 'function' ? initialData() : initialData), // eslint-disable-line no-nested-ternary\n        css: Array.from(css).join(''),\n    });\n\n    return layout(View.Layout || Html, htmlData, ctx);\n}\n\nexport default function render(options) {\n    return '<!doctype html>\\n' + renderToStaticMarkup(app(options));\n}\n"]}