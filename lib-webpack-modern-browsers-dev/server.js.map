{"version":3,"sources":["../src/server.jsx"],"names":[],"mappings":"AAAA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,cAAT,EAAyB,oBAAzB,QAAqD,kBAArD;AACA,OAAO,UAAP,MAAuB,OAAvB;;iBAEgB,O;iBAAT,G;;;AAEP,OAAO,SAAS,iBAAT,CAA2B,EAAE,GAAF,EAAO,OAAP,EAAgB,IAAhB,EAAsB,IAAtB,EAA3B,EAAyD;AAC5D,UAAM,OAAO,UAAb;AACA,WAAO,eAAe;AAAC,WAAD;AAAA,UAAK,SAAS,OAAd;AAAuB,4BAAC,IAAD,EAAU,IAAV;AAAvB,KAAf,CAAP;AACH;;AAED,SAAS,MAAT,CAAgB,MAAhB,EAAwB,IAAxB,EAA8B;AAC1B,WAAO,oBAAC,MAAD,EAAY,IAAZ,CAAP;AACH;;AAED,SAAS,GAAT,CAAa,EAAE,OAAF,EAAW,IAAX,EAAiB,WAAW,EAA5B,EAAgC,IAAhC,EAAsC,WAAtC,EAAmD,IAAnD,EAAyD,GAAzD,EAAb,EAA6E;AACzE,QAAM,MAAM,IAAI,GAAJ,EAAZ;AACA,eAAW,OAAO,MAAP,CAAc,QAAd,EAAwB,IAAxB,CAAX;;AAEA,QAAM,MAAM;AACR,gBAAQ;AAAA,mBAAS,IAAI,GAAJ,CAAQ,KAAR,CAAT;AAAA,SADA;AAER,kBAAU;AAAA,mBAAS,SAAS,KAAT,GAAiB,KAA1B;AAAA,SAFF;AAGR,iBAAS,CAAC,GAAD,EAAM,KAAN;AAAA,mBAAgB,SAAS,GAAT,IAAgB,KAAhC;AAAA,SAHD;AAIR;AAJQ,KAAZ;;AAOA,WAAO,MAAP,CAAc,QAAd,EAAwB;AACpB,cAAM,kBAAkB;AACpB,qBAAS,GADW;AAEpB,eAFoB;AAGpB,gBAHoB;AAIpB;AAJoB,SAAlB,CADc;;AAQpB,qBAAa,CAAC,WAAD,GAAe,IAAf,GAAuB,OAAO,WAAP,KAAuB,UAAvB,GAAoC,aAApC,GAAoD,WARpE;AASpB,aAAK,MAAM,IAAN,CAAW,GAAX,EAAgB,IAAhB,CAAqB,EAArB;AATe,KAAxB;;AAYA,QAAM,SAAS,KAAK,MAAL,IAAe,IAA9B;AACA,QAAI,CAAC,MAAL,EAAa;AACT,cAAM,IAAI,KAAJ,CAAU,gBAAV,CAAN;AACH;;AAED,WAAO,OAAO,MAAP,EAAe,QAAf,EAAyB,GAAzB,CAAP;AACH;;AAED,eAAe,SAAS,MAAT,CAAgB,OAAhB,EAAyB;AACpC,WAAQ,qBAAmB,qBAAqB,IAAI,OAAJ,CAArB,CAAmC,GAA9D;AACH","file":"server.jsx","sourcesContent":["import React from 'react';\nimport { renderToString, renderToStaticMarkup } from 'react-dom/server';\nimport DefaultApp from './App';\n\nexport App from './App';\n\nexport function renderToStringApp({ App, context, View, data }) {\n    App = App || DefaultApp;\n    return renderToString(<App context={context}><View {...data} /></App>);\n}\n\nfunction layout(Layout, data) {\n    return <Layout {...data} />;\n}\n\nfunction app({ context, View, htmlData = {}, data, initialData, Html, App }) {\n    const css = new Set();\n    htmlData = Object.assign(htmlData, data);\n\n    const ctx = {\n        addCss: value => css.add(value),\n        setTitle: value => htmlData.title = value,\n        setMeta: (key, value) => htmlData[key] = value,\n        context,\n    };\n\n    Object.assign(htmlData, {\n        body: renderToStringApp({\n            context: ctx,\n            App,\n            View,\n            data,\n        }),\n        // eslint-disable-next-line no-nested-ternary\n        initialData: !initialData ? data : (typeof initialData === 'function' ? initialData() : initialData),\n        css: Array.from(css).join(''),\n    });\n\n    const Layout = View.Layout || Html;\n    if (!Layout) {\n        throw new Error('Invalid Layout');\n    }\n\n    return layout(Layout, htmlData, ctx);\n}\n\nexport default function render(options) {\n    return `<!doctype html>\\n${renderToStaticMarkup(app(options))}`;\n}\n"]}