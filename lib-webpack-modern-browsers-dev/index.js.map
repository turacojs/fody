{"version":3,"sources":["../src/index.jsx"],"names":[],"mappings":";;AAAA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,cAAT,EAAyB,oBAAzB,QAAqD,kBAArD;AACA,OAAO,UAAP,MAAuB,OAAvB;;iBAEgB,O;iBAAT,G;;;AAEP,OAAO,SAAS,iBAAT,OAAyD;AAAA,MAA5B,GAA4B,QAA5B,GAA4B;AAAA,MAAvB,OAAuB,QAAvB,OAAuB;AAAA,MAAd,IAAc,QAAd,IAAc;AAAA,MAAR,IAAQ,QAAR,IAAQ;;AAC9D,QAAM,OAAO,UAAb;AACA,SAAO,eAAe;AAAC,OAAD;AAAA,MAAK,SAAS,OAAd;AAAA;AAAuB,wBAAC,IAAD,eAAU,IAAV;AAAA;AAAA;AAAvB,GAAf,CAAP;AACD;;AAED,SAAS,MAAT,CAAgB,MAAhB,EAAwB,IAAxB,EAA8B;AAC5B,SAAO,oBAAC,MAAD,eAAY,IAAZ;AAAA;AAAA,KAAP;AACD;;AAED,SAAS,GAAT,QAA6E;AAAA,MAA9D,OAA8D,SAA9D,OAA8D;AAAA,MAArD,IAAqD,SAArD,IAAqD;AAAA,6BAA/C,QAA+C;AAAA,MAA/C,QAA+C,kCAApC,EAAoC;AAAA,MAAhC,IAAgC,SAAhC,IAAgC;AAAA,MAA1B,WAA0B,SAA1B,WAA0B;AAAA,MAAb,IAAa,SAAb,IAAa;AAAA,MAAP,GAAO,SAAP,GAAO;;AAC3E,MAAM,MAAM,IAAI,GAAJ,EAAZ;AACA,aAAW,OAAO,MAAP,CAAc,QAAd,EAAwB,IAAxB,CAAX;;AAEA,MAAM,MAAM;AACV,YAAQ;AAAA,aAAS,IAAI,GAAJ,CAAQ,KAAR,CAAT;AAAA,KADE;AAEV,cAAU;AAAA,aAAS,SAAS,KAAT,GAAiB,KAA1B;AAAA,KAFA;AAGV,aAAS,CAAC,GAAD,EAAM,KAAN;AAAA,aAAgB,SAAS,GAAT,IAAgB,KAAhC;AAAA,KAHC;AAIV;AAJU,GAAZ;;AAOA,MAAI,CAAC,WAAL,EAAkB;AAChB,kBAAc,IAAd;AACD,GAFD,MAEO;AACL,kBAAc,OAAO,WAAP,KAAuB,UAAvB,GAAoC,aAApC,GAAoD,WAAlE;AACD;;AAED,SAAO,MAAP,CAAc,QAAd,EAAwB;AACtB,UAAM,kBAAkB;AACtB,eAAS,GADa;AAEtB,SAFsB;AAGtB,UAHsB;AAItB;AAJsB,KAAlB,CADgB;AAOtB,iBAAa,WAPS;AAQtB,SAAK,MAAM,IAAN,CAAW,GAAX,EAAgB,IAAhB,CAAqB,EAArB;AARiB,GAAxB;;AAWA,MAAM,SAAS,KAAK,MAAL,IAAe,IAA9B;;AAEA,MAAI,CAAC,MAAL,EAAa;AACX,UAAM,IAAI,KAAJ,CAAU,gBAAV,CAAN;AACD;;AAED,SAAO,OAAO,MAAP,EAAe,QAAf,EAAyB,GAAzB,CAAP;AACD;;AAED,eAAe,SAAS,MAAT,CAAgB,OAAhB,EAAyB;AACtC,SAAQ,qBAAmB,qBAAqB,IAAI,OAAJ,CAArB,CAAmC,GAA9D;AACD","file":"index.jsx","sourcesContent":["import React from 'react';\nimport { renderToString, renderToStaticMarkup } from 'react-dom/server';\nimport DefaultApp from './App';\n\nexport App from './App';\n\nexport function renderToStringApp({ App, context, View, data }) {\n  App = App || DefaultApp;\n  return renderToString(<App context={context}><View {...data} /></App>);\n}\n\nfunction layout(Layout, data) {\n  return <Layout {...data} />;\n}\n\nfunction app({ context, View, htmlData = {}, data, initialData, Html, App }) {\n  const css = new Set();\n  htmlData = Object.assign(htmlData, data);\n\n  const ctx = {\n    addCss: value => css.add(value),\n    setTitle: value => htmlData.title = value,\n    setMeta: (key, value) => htmlData[key] = value,\n    context,\n  };\n\n  if (!initialData) {\n    initialData = data;\n  } else {\n    initialData = typeof initialData === 'function' ? initialData() : initialData;\n  }\n\n  Object.assign(htmlData, {\n    body: renderToStringApp({\n      context: ctx,\n      App,\n      View,\n      data,\n    }),\n    initialData: initialData,\n    css: Array.from(css).join(''),\n  });\n\n  const Layout = View.Layout || Html;\n\n  if (!Layout) {\n    throw new Error('Invalid Layout');\n  }\n\n  return layout(Layout, htmlData, ctx);\n}\n\nexport default function render(options) {\n  return `<!doctype html>\\n${renderToStaticMarkup(app(options))}`;\n}\n"]}