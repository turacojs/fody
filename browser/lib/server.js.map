{"version":3,"sources":["../../src/server.jsx"],"names":[],"mappings":";;;;;QAIgB,iBAAiB,GAAjB,iBAAiB;kBAkCT,MAAM;;;;;;;;;;;;;;AAlCvB,SAAS,iBAAiB,OAAoC;QAAjC,GAAG,QAAH,GAAG;QAAE,OAAO,QAAP,OAAO;QAAE,SAAS,QAAT,SAAS;QAAE,IAAI,QAAJ,IAAI;;AAC7D,OAAG,GAAG,GAAG,iBAAc,CAAC;AACxB,WAAO,YALF,cAAc,EAKG;AAAC,WAAG;UAAC,OAAO,EAAE,OAAO,AAAC;QAAC,8BAAC,SAAS,EAAK,IAAI,CAAI;KAAM,CAAC,CAAC;CAC/E;;AAED,SAAS,MAAM,CAAC,MAAM,EAAE,IAAI,EAAE;AAC1B,WAAO,8BAAC,MAAM,EAAK,IAAI,CAAI,CAAC;CAC/B;;AAED,SAAS,GAAG,QAAuD;QAApD,OAAO,SAAP,OAAO;QAAE,SAAS,SAAT,SAAS;QAAE,IAAI,SAAJ,IAAI;QAAE,WAAW,SAAX,WAAW;QAAE,IAAI,SAAJ,IAAI;QAAE,GAAG,SAAH,GAAG;;AAC3D,QAAM,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;AACtB,QAAM,QAAQ,GAAG,IAAI,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,GAAG,EAAE,CAAC;;AAErD,QAAM,GAAG,GAAG;AACR,cAAM,EAAE,gBAAA,KAAK;mBAAI,GAAG,CAAC,GAAG,CAAC,KAAK,CAAC;SAAA;AAC/B,gBAAQ,EAAE,kBAAA,KAAK;mBAAI,QAAQ,CAAC,KAAK,GAAG,KAAK;SAAA;AACzC,eAAO,EAAE,iBAAC,GAAG,EAAE,KAAK;mBAAK,QAAQ,CAAC,GAAG,CAAC,GAAG,KAAK;SAAA;AAC9C,eAAO,EAAP,OAAO;KACV,CAAC;;AAEF,UAAM,CAAC,MAAM,CAAC,QAAQ,EAAE;AACpB,YAAI,EAAE,iBAAiB,CAAC;AACpB,mBAAO,EAAE,GAAG;AACZ,eAAG,EAAH,GAAG;AACH,qBAAS,EAAT,SAAS;AACT,gBAAI,EAAJ,IAAI;SACP,CAAC;AACF,mBAAW,EAAE,CAAC,WAAW,GAAG,IAAI,GAAI,OAAO,WAAW,KAAK,UAAU,GAAG,WAAW,EAAE,GAAG,WAAW,AAAC;AACpG,WAAG,EAAE,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;KAChC,CAAC,CAAC;;AAEH,WAAO,MAAM,CAAC,SAAS,CAAC,MAAM,IAAI,IAAI,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC;CAC1D;;AAEc,SAAS,MAAM,CAAC,OAAO,EAAE;AACpC,WAAO,mBAAmB,GAAG,YAtCR,oBAAoB,EAsCS,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC;CACnE","file":"server.js","sourcesContent":["import React from 'react';\nimport { renderToString, renderToStaticMarkup } from 'react-dom/server';\nimport DefaultApp from './App';\n\nexport function renderToStringApp({ App, context, Component, data }) {\n    App = App || DefaultApp;\n    return renderToString(<App context={context}><Component {...data} /></App>);\n}\n\nfunction layout(Layout, data) {\n    return <Layout {...data} />;\n}\n\nfunction app({ context, Component, data, initialData, Html, App }) {\n    const css = new Set();\n    const htmlData = data ? Object.assign({}, data) : {};\n\n    const ctx = {\n        addCss: value => css.add(value),\n        setTitle: value => htmlData.title = value,\n        setMeta: (key, value) => htmlData[key] = value,\n        context,\n    };\n\n    Object.assign(htmlData, {\n        body: renderToStringApp({\n            context: ctx,\n            App,\n            Component,\n            data,\n        }),\n        initialData: !initialData ? data : (typeof initialData === 'function' ? initialData() : initialData), // eslint-disable-line no-nested-ternary\n        css: Array.from(css).join(''),\n    });\n\n    return layout(Component.Layout || Html, htmlData, ctx);\n}\n\nexport default function render(options) {\n    return '<!doctype html>\\n' + renderToStaticMarkup(app(options));\n}\n"]}